{"ast":null,"code":"import { highlightRegion } from \"./actions/countries.actions\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"@angular/common\";\nfunction AppComponent_mat_card_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-card\", 5);\n    i0.ɵɵlistener(\"cdkDropListDropped\", function AppComponent_mat_card_2_Template_mat_card_cdkDropListDropped_0_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.onDrop($event));\n    });\n    i0.ɵɵelementStart(1, \"div\", 6);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const region_r2 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"id\", region_r2)(\"cdkDropListData\", region_r2)(\"cdkDropListConnectedTo\", ctx_r0.regions);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(region_r2);\n  }\n}\nfunction AppComponent_mat_card_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\", 7)(1, \"mat-card-content\")(2, \"div\");\n    i0.ɵɵelement(3, \"img\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\")(5, \"h5\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const country_r5 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"cdkDragData\", country_r5)(\"cdkDragBoundary\", ctx_r1.getRegionCard(country_r5));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", country_r5.flag, i0.ɵɵsanitizeUrl)(\"alt\", country_r5.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", country_r5.name, \" \");\n  }\n}\nexport class AppComponent {\n  constructor(store) {\n    this.store = store;\n  }\n  onCountryHover(region) {\n    this.store.dispatch(highlightRegion({\n      region\n    }));\n  }\n}\nAppComponent.ɵfac = function AppComponent_Factory(t) {\n  return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.Store));\n};\nAppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppComponent,\n  selectors: [[\"app-root\"]],\n  decls: 5,\n  vars: 2,\n  consts: [[1, \"page-layout\"], [1, \"regions-container\"], [\"class\", \"region-card\", \"cdkDropList\", \"\", 3, \"id\", \"cdkDropListData\", \"cdkDropListConnectedTo\", \"cdkDropListDropped\", 4, \"ngFor\", \"ngForOf\"], [1, \"cards-container\"], [\"id\", \"countries-list\", \"style\", \"width: 150px ; height: 110px; color: white\", \"cdkDrag\", \"\", 3, \"cdkDragData\", \"cdkDragBoundary\", 4, \"ngFor\", \"ngForOf\"], [\"cdkDropList\", \"\", 1, \"region-card\", 3, \"id\", \"cdkDropListData\", \"cdkDropListConnectedTo\", \"cdkDropListDropped\"], [1, \"region-title\"], [\"id\", \"countries-list\", \"cdkDrag\", \"\", 2, \"width\", \"150px\", \"height\", \"110px\", \"color\", \"white\", 3, \"cdkDragData\", \"cdkDragBoundary\"], [2, \"width\", \"50px\", 3, \"src\", \"alt\"]],\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n      i0.ɵɵtemplate(2, AppComponent_mat_card_2_Template, 3, 4, \"mat-card\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 3);\n      i0.ɵɵtemplate(4, AppComponent_mat_card_4_Template, 7, 5, \"mat-card\", 4);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.regions);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.countries);\n    }\n  },\n  dependencies: [i2.NgForOf],\n  styles: [\"(()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  { // webpackBootstrap\\n \\t\\\"use strict\\\";\\n \\t\\n \\t\\n })()[_ngcontent-%COMP%]\\n;\"]\n});","map":{"version":3,"mappings":"AA6FA,SAAQA,eAAe,QAAO,6BAA6B;;;;;;;IC3FvDC,mCAKgD;IAAtCA;MAAAA;MAAA;MAAA,OAAsBA,oCAAc;IAAA,EAAC;IAC/CA,8BAA0B;IAAAA,YAAU;IAAAA,iBAAM;;;;;IALDA,8BAAa;IAK5BA,eAAU;IAAVA,+BAAU;;;;;IAIpCA,mCAIqD;IAG/CA,yBAAmE;IACrEA,iBAAM;IACNA,2BAAK;IAEHA,YACA;IAAAA,iBAAK;;;;;IATDA,wCAAuB;IAIFA,eAAoB;IAApBA,uDAAoB;IAI7CA,eACA;IADAA,gDACA;;;AD6EV,OAAM,MAAOC,YAAY;EAEvBC,YAAoBC,KAAyC;IAAzC,UAAK,GAALA,KAAK;EAAuC;EAEhEC,cAAc,CAACC,MAAc;IAC3B,IAAI,CAACF,KAAK,CAACG,QAAQ,CAACP,eAAe,CAAC;MAAEM;IAAM,CAAE,CAAC,CAAC;EAClD;;;mBANWJ,YAAY;AAAA;;QAAZA,YAAY;EAAAM;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCrGzBX,8BAAyB;MAErBA,uEAOW;MACbA,iBAAM;MACNA,8BAA6B;MAC3BA,uEAeW;MACbA,iBAAM;;;MAzByBA,eAAU;MAAVA,qCAAU;MAUTA,eAAY;MAAZA,uCAAY","names":["highlightRegion","i0","AppComponent","constructor","store","onCountryHover","region","dispatch","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\PC\\Documents\\GitHub\\tp2-frontend\\src\\app\\app.component.ts","C:\\Users\\PC\\Documents\\GitHub\\tp2-frontend\\src\\app\\app.component.html"],"sourcesContent":["// import {Component, OnInit} from '@angular/core';\r\n// import {CountriesService} from \"./services/countries.service\";\r\n// import {CountryMapper} from \"./mappers/country.mapper\";\r\n// import {Country} from \"./models/country.model\";\r\n// import {CdkDrag, CdkDragDrop, CdkDropList} from '@angular/cdk/drag-drop';\r\n//\r\n// @Component({\r\n//   selector: 'app-root',\r\n//   templateUrl: './app.component.html',\r\n//   styleUrls: ['./app.component.scss']\r\n// })\r\n// export class AppComponent implements OnInit{\r\n//   title = 'countries-app';\r\n//   regions = ['Africa', 'Americas', 'Asia', 'Europe', 'Oceania', 'Antarctic'];\r\n//\r\n//   countries: Array<Country> = [];\r\n//\r\n//   constructor(private countriesService: CountriesService) { }\r\n//\r\n//   ngOnInit() {\r\n//     const savedCountries= localStorage.getItem('countries');\r\n//     if (savedCountries){\r\n//       this.countries = JSON.parse(savedCountries);\r\n//     }\r\n//     else{\r\n//       this.countriesService.fetchAllCountries().subscribe(res => {\r\n//         this.countries = CountryMapper.fromCountryDtoToCountry(res);\r\n//       })\r\n//     }\r\n//   }\r\n//\r\n//   onDrop(event: CdkDragDrop<string>) {\r\n//     console.log('onDrop() called');\r\n//\r\n//     const droppedCountry = event.item.data;\r\n//     const targetRegion = event.container.data; // use event.container.data directly\r\n//     const currentIndex = this.countries.indexOf(droppedCountry);\r\n//     this.countries.splice(currentIndex, 1);\r\n//     const targetRegionIndex = this.regions.indexOf(targetRegion);\r\n//     const nextCountryIndex = this.getNextCountryIndex(targetRegionIndex, currentIndex);\r\n//     this.countries.splice(nextCountryIndex, 0, droppedCountry);\r\n//\r\n//     localStorage.setItem('countries', JSON.stringify(this.countries));\r\n//\r\n//     // Add the following lines to highlight the region that the country belongs to\r\n//     const regionCard = document.getElementById(targetRegion);\r\n//     console.log(targetRegion);\r\n//     if (regionCard) {\r\n//       regionCard.classList.add('highlight');\r\n//     }\r\n//   }\r\n//\r\n//   getNextCountryIndex(regionIndex: number, currentIndex: number) {\r\n//     let nextIndex = this.countries.length;\r\n//     for (let i = currentIndex + 1; i < this.countries.length; i++) {\r\n//       if (this.regions.indexOf(this.countries[i].region) > regionIndex) {\r\n//         nextIndex = i;\r\n//         break;\r\n//       }\r\n//     }\r\n//     return nextIndex;\r\n//   }\r\n//\r\n//    getRegionCard(country: Country): HTMLElement {\r\n//     const region = country.region;\r\n//     const regionCard = document.getElementById(region) as HTMLElement;\r\n//\r\n//     // Set CSS properties for the region card\r\n//     // regionCard.style.backgroundColor = 'yellow';\r\n//\r\n//     return regionCard;\r\n//   }\r\n//\r\n//\r\n//   canEnterPredicate = (drag: CdkDrag, drop: CdkDropList) => {\r\n//     const dropRegion = drop.id;\r\n//     const dragRegion = drag.data.region;\r\n//     return dropRegion === dragRegion;\r\n//   }\r\n//\r\n//   //\r\n//   // items = ['Item 1', 'Item 2', 'Item 3'];\r\n//   // connectedDropLists: string = 'list-1';\r\n//   // onDrop(event: CdkDragDrop<string[]>) {\r\n//   //   moveItemInArray(this.items, event.previousIndex, event.currentIndex);\r\n//   //   console.log('onDrop called');\r\n//   // }\r\n//   //\r\n//\r\n// }\r\n\r\nimport { Component } from '@angular/core';\r\nimport { Store } from '@ngrx/store';\r\nimport {highlightRegion} from \"./actions/countries.actions\";\r\n\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent {\r\n\r\n  constructor(private store: Store<{ regionHighlight: string }>) {}\r\n\r\n  onCountryHover(region: string) {\r\n    this.store.dispatch(highlightRegion({ region }));\r\n  }\r\n}\r\n\r\n","<div class=\"page-layout\">\r\n  <div class=\"regions-container\">\r\n    <mat-card class=\"region-card\"\r\n              *ngFor=\"let region of regions\" [id]=\"region\"\r\n              cdkDropList\r\n              [cdkDropListData]=\"region\"\r\n              [cdkDropListConnectedTo]=\"regions\"\r\n              (cdkDropListDropped)=\"onDrop($event)\">\r\n    <div class=\"region-title\">{{region}}</div>\r\n    </mat-card>\r\n  </div>\r\n  <div class=\"cards-container\">\r\n    <mat-card id=\"countries-list\" style=\"width: 150px ; height: 110px; color: white\"\r\n              *ngFor=\"let country of countries\"\r\n              cdkDrag\r\n              [cdkDragData]=\"country\"\r\n              [cdkDragBoundary]=\"getRegionCard(country)\">\r\n    <mat-card-content>\r\n        <div>\r\n          <img style=\"width: 50px\" [src]=\"country.flag\" [alt]=\"country.name\">\r\n        </div>\r\n        <div>\r\n          <h5>\r\n          {{country.name}}\r\n          </h5>\r\n        </div>\r\n      </mat-card-content>\r\n    </mat-card>\r\n  </div>\r\n</div>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}